\documentclass[a4paper,10pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath,amssymb}
\usepackage{enumerate}
\usepackage{ngerman}
%\usepackage{graphicx}
\usepackage{ifpdf}
\usepackage[usenames]{color}
\usepackage[left=2.5cm,right=2.5cm,top=2.5cm,bottom=2.5cm]{geometry}
\usepackage[titles]{tocloft}
\usepackage[colorlinks=true,linkcolor=black]{hyperref}
\usepackage[pdftex]{graphicx}
\usepackage{geometry}
%\geometry{top=0cm,bottom=0cm,left=0cm,right=0cm,nohead,nofoot}


\title{Entwurf}
\date{}

\author{Usman Ghani Ahmed \\
Philip Caroli\\
Maximilian Madlung\\ 
Jeremias Mechler\\ 
Fabian Neundorf}

\ifpdf
\DeclareGraphicsExtensions{.pdf,.png}
\else
\DeclareGraphicsExtensions{.eps}
\fi

% Einrückung bei Absätzen
\setlength{\parindent}{0mm}
% Zeilenabstand bei Absätzen
\setlength{\parskip}{2mm}

\begin{document}
 
\vspace{5cm}
\maketitle
\begin{center}
\vspace{3cm}
\huge{Praxis der Softwareentwicklung \\
Gruppe 3 \\[0.5cm]
Entwicklung eines "`Monopoly"'-ähnlichen Spiels \\[0.5cm]
%\includegraphics[height=2cm]{kitlogo_de_rgb}  \\[0.5cm]
WS 2010 / 2011} \\[2cm]
Version 1.1
%\textcolor{red}{! DRAFT !}
\end{center}

\newpage

\tableofcontents

\newpage

\section{KI-Client}

\subsection{Allgemeines}
Feature X ist wegen ... noch nicht voll funktionsfähig
\subsection{Bekannte Fehler / Probleme / noch nicht implementierte Funktionen}
\begin{itemize}
\item Parameter für die Bewertungsfunktionen sind noch nicht bestimmt
\item Auktionen werden nicht unterstützt (wird noch hinzugefügt)
\item Handel wird nur testweise unterstützt (wird noch hinzugefügt)
\item Hypotheken
\end{itemize}
\subsection{Änderungen gegenüber dem Entwurf}
\begin{itemize}
\item Andere Commands
\end{itemize}

\subsection{Entwurfsentscheidungen}
Wie bereits im Dokument zum Entwurf angekündigt wurden die einzelnen Bewertungsfunktionen als Singletons umgesetzt.

\section OjimServer
\subsection{Allgemeines}
\subsection {Änderungen gegenüber dem Entwurf}
\begin{itemize}
\item Der Server beinhaltet nun eine Möglichkeit ihn über die Kommandozeile zu starten und zu beenden
\item Der Server bekommt am Anfang die maximale Spielerzahl und die Computerspielerzahl übergeben
\item Die Funktionalität der Methoden aus IServer, IServerTrade und IServerAuction werden wie im Entwurf vorgesehen implementiert, einzelne Abläufe und Folgeaktionen waren im Entwurf aber nicht genau vorgeschrieben.
\item Der Übersichtlichkeit halber wurden einige privaten Methoden eingefügt, beispielsweise
\end{itemize}
\begin{itemize}
\item private boolean checkAllPlayersReady()
\item Es gab ein paar Namensänderungen im package org.ojim.rmi.server 
\end{itemize}
\begin{itemize}
\item BufferServer wurde geändert in StartNetOjim
\item ImplBuffer wurde geändert in ImplNetOjim
\end{itemize}
\item Network Klasse wurde weggelassen, da die RMI die Verbingsschicht überdeckt und die Sockets selber managt
\item Da der Server auch in der Lage sein muss entfernte Methoden in den Clients aufzurufen, sind wir auf Callbacks angewiesen Zu diesem Zweck sind noch folgende Klassen hinzugekommen, die für den Server Methoden zur Verfügung stellen welche aus einer anderen JVM aufgerufen werden können
\begin{itemize}
\item interface NetClient extends Remote : spezifiziert alle Methoden die über das Netzwerk vom Server aufgerufen werden können 
\item ImplNetClient extends UnicastRemoteObject implements NetOjim: implementiert die Methoden des Interfaces
\item StartNetClient Startet einen neuen Client und holt sich eine Referenz vom Namendienst der im Server gestartet wurde
\end{itemize}

\section{ClientBase}
\subsection {Änderungen gegenüber dem Entwurf}
\subsubsection{SimpleClient}
Da der KI Client verschiedene "Command"-Klassen hat, benötigen diese Zugriff auf den IServer ohne sich selber als neuen Client einzuloggen. Deshalb wurde eine vereinfachte Client Klasse geschrieben. Von dieser können dann alle Command Klassen des KI Clients, sowie ClientBase erben.

Die Klasse SimpleClient dabei implementiert nicht das IClient Interface, um eben zu verhindern, dass sie doppelt registiert werden müssen. Sie implementiert dabei nur Methoden um die IServer-Methoden abgesichert aufzurufen. Die Getter-Methoden werden dabei direkt durchgeleitet. Alle Aktionsmethoden hingegen testen vorher, ob es nach den Spielregeln erlaubt ist, diesen Zug durchzuführen.
\subsubsection{inform*-Methoden}
Alle inform*-Methoden sind jetzt final und rufen die abstrakten on*-Methoden auf. Dadurch wird gewährleistet, dass diese Methoden auf jeden Fall ausgeführt werden. Somit müssen alle Clients, die nicht abstrakt sind, diese Methoden zwingend Implementieren.

Damit ist ClientBase so ähnlich wie aufgebaut, wie die Listener Interfaces aus Swing. Nebenbei übersetzt sie die Variablen in die entsprechenden Objekte aus dem GameState.

\section{Logik}
Zu Beachten ist, dass auf dem Spielfeld, es mehrere ``Felder'' gibt. Das heißt wenn im folgenden von ``Feld'' ausgegangen wird, dann handelt es sich normalerweise um diese Einzelfelder (z.~B. Straßen, Bahnhöfe, \dots).
\subsection {Änderungen gegenüber dem Entwurf}
\subsubsection{Straßengruppen}
Zusätzlich zur normalen Straßengruppe (eigentlich Feldergruppe) gibt es weitere spezieller Feldgruppen.

So gibt es die Bahnhofsgruppe, in der mehrere Bahnhöfe gespeichert werden. Damit kann der Bahnhof selber überprüfen, anhand der Gruppe in der der Bahnhof ist, wie viele weitere Bahnhöfe der Besitzer des testenden Bahnhofs hat. Diese Gruppe speichert dann auch, wie teuer die Miete für diesen Bahnhof ist. Somit kann man sehr einfach die Anzahl der Bahnhöfe ändern.

Zusätzlich gibt es noch eine Feldergruppe für Infrastrukturgebäude. Hier verhält es sich regeltechnisch ähnlich wie bei den Bahnhöfen. Da dort abhängig von den besitzten Feldern der Faktor sich verändert. Nun überprüft auch dieses Feld, wie viele der Besitzer besitzt und fragt dann bei der Gruppe ab, wie groß der Faktor dafür ist. Dadurch kann man einfach ein neues Infrastrukturgebäude der Gruppe hinzufügen und die Faktoren verändern.
\subsubsection{Weitere Änderungen}
\begin{itemize}
\item Da FieldRule und CardRule keinen Zweck erfüllt, wurde diese in Card und Field sowie dessen Unterklassen übernommen.
\item Einige Actions wurden entfernt und einige andere hinzugefügt.
\item Mithilfe der ActionFactory können einige vordefinierte Actions erzeugen.
\end{itemize}

\end{document}
